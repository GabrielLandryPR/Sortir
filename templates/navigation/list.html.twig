{% extends 'base.html.twig' %}

{% block title %}
    Liste des sorties
{% endblock %}

{% block body %}
    <h1>Liste des sorties</h1>

    <h2>Filtrer les sorties :</h2>

    {{ form_start(form) }}
    {{ form_widget(form.site) }}
    {{ form_widget(form.submit) }}
{{ form_end(form) }}

    <form>
        <input type="checkbox" id="organizer" name="filter" value="organizer">
        <label for="organizer">Sorties dont je suis l'organisateur/trice</label><br>
        <input type="checkbox" id="registered" name="filter" value="registered">
        <label for="registered">Sorties auxquelles je suis inscrit/e</label><br>
        <input type="checkbox" id="notRegistered" name="filter" value="notRegistered">
        <label for="notRegistered">Sorties auxquelles je ne suis pas inscrit/e</label><br>
        <input type="checkbox" id="past" name="filter" value="past">
        <label for="past">Sorties passées</label><br>
    </form>
    {% for sortie in sorties %}


        <table>
            <thead>
            <tr>
                <th>Nom sortie</th>
                <th>Date début</th>
                <th>Date fin</th>
                <th>Inscrit/Place</th>
                <th>Etat sortie</th>
                <th>Inscrit</th>
                <th>Organisateur</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>{{ sortie.nomSortie }}</td>
                <td>{{ sortie.dateDebut|date('Y-m-d H:i:s') }}</td>
                <td>{{ sortie.dateFin|date('Y-m-d H:i:s') }}</td>
                <td>{{ sortie.Users|length }}/{{ sortie.nbInscriptionMax }}</td>
                <td>{{ sortie.noEtat.libelle }}</td>
                {% if app.user in sortie.Users %}
                <td>X</td>
                {% else %}
                    <td> </td>
                {% endif %}
                <td>{{ sortie.idOrga.pseudo }}</td>
                <td><a href="{{ path('app_sortir_detailSortie', {'id': sortie.id}) }}">Afficher</a></td>
                <td><a href="{{ path('app_sortir_inscriptionSortie', {'id': sortie.id}) }}">S'inscrire</a></td>
                <td><a href="{{ path('app_sortir_desinscriptionSortie', {'id': sortie.id}) }}">Se désister</a></td>
            </tr>
            </tbody>
        </table>
    {% endfor %}
{% endblock %}